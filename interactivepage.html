<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Interactive Quiz — Personality Tester</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div class="site" id="root">
        <header class="header card fade-in">
            <a class="brand" href="homepage.html">
                <div class="logo">PT</div>
                <div>
                    <div style="font-weight:800">Personality Tester</div>
                    <div style="font-size:12px; color:var(--muted)">I hope the exam questions are as easy as this 😢</div>
                </div>
            </a>

            <nav class="nav">
                <a href="homepage.html">Home</a>
                <a href="aboutpage.html">About</a>
                <a href="interactivepage.html">Take Test</a>
            </nav>
        </header>

        <main>
            <section class="card fade-in">
                <div style="display:flex; justify-content:space-between; gap:12px; align-items:center; flex-wrap:wrap;">
                    <div>
                        <h2 style="margin:0">15-question Personality Quiz</h2>
                        <p style="color:var(--muted); margin:6px 0 0 0">Choose the number that best matches how much you agree (1 = disagree, 5 = agree).</p>
                    </div>

                    <!-- Light/Dark toggle -->
                    <div style="display:flex; gap:8px; align-items:center;">
                        <label for="themeToggle" style="font-weight:700; color:var(--muted); font-size:14px">Theme</label>
                        <button id="themeToggle" class="btn ghost" aria-pressed="false">Toggle Light/Dark</button>
                    </div>
                </div>

                <div style="margin-top:14px" class="quiz">
                    <div class="questions card" id="questionsWrap" aria-live="polite">
                        <!-- Questions are generated by JS -->
                        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
                            <div style="font-weight:800">Questions</div>
                            <div style="color:var(--muted)">Touch-friendly buttons</div>
                        </div>

                        <form id="quizForm" onsubmit="return gradeQuiz(event)" aria-label="Personality quiz">
                            <div id="questions"></div>

                            <div style="display:flex; gap:8px; margin-top:12px;">
                                <button class="btn" type="submit">See Results</button>
                                <button class="btn ghost" type="button" onclick="resetQuiz()">Reset</button>
                            </div>
                        </form>
                    </div>

                    <aside class="results card" id="resultsCard">
                        <h3 style="margin-top:0">Your Results</h3>
                        <div id="summary" style="color:var(--muted)">Answer all 15 questions and press "See Results".</div>

                        <div style="margin-top:12px">
                            <div style="font-weight:700; font-size:13px">Extraversion</div>
                            <div class="result-bar"><div id="bar-ext" class="result-fill" style="width:0%"></div></div>

                            <div style="font-weight:700; font-size:13px; margin-top:8px">Organized</div>
                            <div class="result-bar"><div id="bar-org" class="result-fill" style="width:0%"></div></div>

                            <div style="font-weight:700; font-size:13px; margin-top:8px">Thinking</div>
                            <div class="result-bar"><div id="bar-thk" class="result-fill" style="width:0%"></div></div>
                        </div>

                        <div style="margin-top:14px; font-size:13px; color:var(--muted)">
                            <strong>Tip:</strong> Use results as a friendly guide — not a diagnosis.
                        </div>
                    </aside>
                </div>

                <!-- Expandable FAQ -->
                <div style="margin-top:14px" class="card fade-in faq" id="faq">
                    <h3>FAQ</h3>
                    <div class="item">
                        <div class="trigger" onclick="toggleFaq(this)">How long does the test take? <span>+</span></div>
                        <div class="content">If you can't do it is 2-4 minutes then you need to go back to school.</div>
                    </div>

                    <div class="item">
                        <div class="trigger" onclick="toggleFaq(this)">Is it scientifically exact? <span>+</span></div>
                        <div class="content">No. This is for funsies only don't take it seriously.</div>
                    </div>

                    <div class="item">
                        <div class="trigger" onclick="toggleFaq(this)">What if I want a scientifically accurate test? <span>+</span></div>
                        <div class="content">I dunno. C3A maybe? Do they have these kind of tests there?</div>
                    </div>
                    <div class="item">
                        <div class="trigger" onclick="toggleFaq(this)">How many marks should I award to my student if they make a site like this?<span>+</span></div>
                        <div class="content">Obviously you should give them full marks. This is a no-brainer.</div>
                    </div>
                </div>

            </section>

            <footer class="footer" style="margin-top:16px">
                <a href="homepage.html">Home</a> • <a href="aboutpage.html">About & Contact</a>
            </footer>
        </main>
    </div>

    <script>
    /***********************
     * Theme toggle (light/dark)
     ***********************/
    (function(){
      const btn = document.getElementById('themeToggle');
      const root = document.documentElement;
      // default: light (no data-theme)
      btn.addEventListener('click', () => {
        if(document.documentElement.getAttribute('data-theme') === 'dark'){
          document.documentElement.removeAttribute('data-theme');
          btn.setAttribute('aria-pressed','false');
        } else {
          document.documentElement.setAttribute('data-theme','dark');
          btn.setAttribute('aria-pressed','true');
        }
      });
    })();

    /***********************
     * Expandable FAQ
     ***********************/
    function toggleFaq(el){
      const content = el.nextElementSibling;
      if(content.style.display === 'block'){
        content.style.display = 'none';
        el.querySelector('span').textContent = '+';
      } else {
        content.style.display = 'block';
        el.querySelector('span').textContent = '−';
      }
    }

    /***********************
     * Quiz data & rendering
     ***********************/
    const questionsData = [
      // 15 items; each maps to trait buckets: extrovert (E), organized (O), thinking (T)
      // For simplicity, mapped as objects {q, map: {E:1, O:0, T:0}} meaning this question contributes to E etc.
      {q: "I feel energised when I spend time with a group of people.", map: {E:1}},
      {q: "I prefer planning ahead rather than being spontaneous.", map: {O:1}},
      {q: "I make decisions based on logic more than feelings.", map: {T:1}},
      {q: "I enjoy meeting new people and striking conversations.", map: {E:1}},
      {q: "I keep my space and schedule well organized.", map: {O:1}},
      {q: "I often focus on pros and cons when judging a situation.", map: {T:1}},
      {q: "I prefer lively gatherings to quiet nights alone.", map: {E:1}},
      {q: "I like to set goals and follow a checklist.", map: {O:1}},
      {q: "I trust evidence and analysis more than intuition.", map: {T:1}},
      {q: "I feel comfortable being the center of attention.", map: {E:1}},
      {q: "I feel stressed when things are messy or disorganized.", map: {O:1}},
      {q: "I enjoy solving problems with objective rules.", map: {T:1}},
      {q: "I get energy from social activities (parties/meetups).", map: {E:1}},
      {q: "I prefer clearly defined routines over unpredictability.", map: {O:1}},
      {q: "When making choices I value fairness and reason.", map: {T:1}}
    ];

    // Render questions
    const questionsWrap = document.getElementById('questions');
    questionsData.forEach((item, idx) => {
      const qDiv = document.createElement('div');
      qDiv.className = 'q';
      qDiv.innerHTML = `
        <div style="display:flex; justify-content:space-between; align-items:flex-start">
          <div style="font-weight:700">Q${idx+1}. ${item.q}</div>
          <div style="font-size:12px; color:var(--muted); margin-left:12px">1—5</div>
        </div>
        <div class="scale" role="radiogroup" aria-label="Scale for question ${idx+1}">
          ${[1,2,3,4,5].map(n => `
            <input id="q${idx+1}-opt${n}" type="radio" name="q${idx+1}" value="${n}">
            <label for="q${idx+1}-opt${n}" title="${n}">${n}</label>
          `).join('')}
        </div>
      `;
      questionsWrap.appendChild(qDiv);
    });

    // Grading logic: sum contributions
    function gradeQuiz(e){
      e.preventDefault();
      // collect answers
      const answers = [];
      let allAnswered = true;
      for(let i=0;i<questionsData.length;i++){
        const name = 'q' + (i+1);
        const val = document.querySelector(`input[name="${name}"]:checked`);
        if(!val){ allAnswered = false; break; }
        answers.push(parseInt(val.value,10));
      }
      if(!allAnswered){
        alert('Please answer all questions before viewing results.');
        return false;
      }

      // Compute trait scores:
      // For each trait, sum values; then normalize to percent
      const traits = {E:0, O:0, T:0};
      answers.forEach((score, i) => {
        const mapping = questionsData[i].map;
        if(mapping.E) traits.E += score;
        if(mapping.O) traits.O += score;
        if(mapping.T) traits.T += score;
      });

      // Each trait has 5 questions (here we arranged 15 questions 5 per trait)
      const maxPerTrait = 5 * 5; // 5 items per trait * top score 5
      const percent = {
        E: Math.round((traits.E / maxPerTrait) * 100),
        O: Math.round((traits.O / maxPerTrait) * 100),
        T: Math.round((traits.T / maxPerTrait) * 100)
      };

      // Update UI bars
      document.getElementById('bar-ext').style.width = percent.E + '%';
      document.getElementById('bar-org').style.width = percent.O + '%';
      document.getElementById('bar-thk').style.width = percent.T + '%';

      // Build descriptive summary
      const descriptions = [];
      descriptions.push(`<strong>Extraversion:</strong> ${percent.E}% — ${percent.E >= 60 ? 'More outgoing and sociable' : percent.E <= 40 ? 'More reserved or reflective' : 'Balanced'}.`);
      descriptions.push(`<strong>Organized:</strong> ${percent.O}% — ${percent.O >= 60 ? 'Prefer structure and planning' : percent.O <= 40 ? 'Prefer spontaneity' : 'Moderately organized'}.`);
      descriptions.push(`<strong>Thinking:</strong> ${percent.T}% — ${percent.T >= 60 ? 'Prefer logical/objective decision making' : percent.T <= 40 ? 'Prefer considering feelings or values' : 'Mixed decision style'}.`);

      document.getElementById('summary').innerHTML = descriptions.join('<br/><br/>');

      // Smooth-scroll to results on small screens
      document.getElementById('resultsCard').scrollIntoView({behavior:'smooth', block:'center'});

      return false;
    }

    function resetQuiz(){
      document.getElementById('quizForm').reset();
      document.getElementById('summary').textContent = 'Answer all 15 questions and press "See Results".';
      document.getElementById('bar-ext').style.width = '0%';
      document.getElementById('bar-org').style.width = '0%';
      document.getElementById('bar-thk').style.width = '0%';
    }

    // Accessibility: keyboard toggle for FAQ items
    document.querySelectorAll('.faq .trigger').forEach(el => {
      el.setAttribute('tabindex','0');
      el.addEventListener('keydown', (ev) => {
        if(ev.key === 'Enter' || ev.key === ' ') toggleFaq(el);
      });
    });
    </script>
</body>
</html>
